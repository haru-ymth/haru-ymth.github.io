<html>
  <head>	
	  <title>
		  ホームページ
	  </title>
  </head>
	<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T5V03S2YS9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T5V03S2YS9');
</script>
<body>
	<h1>
		ホームページ
	</h1>
	<h2>
		haru-ymth
	</h2>
<main>
    プログラミングが好きな中2です。<br>
    2009年3月生まれなので多分今は<span id="age"></span>歳ですね。
    <script>
        let nowDate=new Date();
        let birthDate=new Date("2009/3/1");
        let ms=nowDate.getTime()-birthDate.getTime();
        let age=Math.floor(ms/(1000*60*60*24*365));
        document.getElementById("age").innerHTML=age;
    </script>
    広告でも募集しようかな
</main>
	<h2>
        ステータス
    </h2>
	<input type="text" id="statustextbox" value="yamaguchi03">
	<button id="submitbutton">表示</button>
    <main>
        <div id="status"></div>
	    もっと詳しいステータスは、<a href="/statistics/?username=yamaguchi03">ここ</a>で見れます。URLを変えれば別の人のも見れます。
    </main>
        <h2>
            関連リンク
        </h2>
    <div id="_elem">
        <div class="_ele">
            <a href="https://twitter.com/haru_ymth">
                <img src="https://help.twitter.com/content/dam/help-twitter/brand/logo.png" width="90" height="90"></a>
                <br>haru_ymth
            
        </div>
        <div class="_ele">
            <a href="https://scratch.mit.edu/users/yamaguchi03">
                <img src="https://upload.wikimedia.org/wikipedia/commons/7/75/Scratch.logo.S.png" width="90" height="90"></a>
                <br>yamaguchi03
            
        </div>
        <div class="_ele">
            <a href="https://github.com/haruymth">
                <img src="/imgs/github.png" width="90" height="90"></a>
                <br>haru-ymth
            
        </div>
		<div class="_ele">
                <img src="https://cdn.worldvectorlogo.com/logos/discord-6.svg" width="90" height="90">
                <br>haru-ymth#6930
        </div>
    </div>
        <style>
            #_elem {
                display:flex;
            }
            ._ele{
              text-align:center;
              margin:10px;
            }
        </style>
	<script>
  async function displayStatus(){
	const username=document.getElementById("statustextbox").value;
	document.getElementById("status").innerHTML=`ステータスを読み込み中...`;
        const res = await fetch(`https://scratchdb.lefty.one/v3/user/info/${username}`);
        const data = await res.json();
        let followers=data["statistics"]["followers"];
        let views=data["statistics"]["views"];
        let followerRank=data["statistics"]["ranks"]["country"]["followers"];
        document.getElementById("status").innerHTML=`
        フォロワー： ${followers} 人<br>
        総参照数： ${views} 回<br>
        日本フォロワー順位： ${followerRank} 位
        <br>※このステータスはScratchDBを使用しています。`;
        }
displayStatus();
		
		document.getElementById("submitbutton").addEventListener("click",displayStatus);
		 
	</script>
	  <script src="/include.js"></script>
	</body>
</html>
